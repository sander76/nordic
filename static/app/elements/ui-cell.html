<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/iron-flex-layout/iron-flex-layout-classes.html">
<link rel="import" href="../styles/app-theme.html">
<link rel="import" href="pv-keypad.html">
<link rel="import" href="../bower_components/marked-element/marked-element.html">
<dom-module id="ui-cell">
    <style include="iron-flex iron-flex-alignment"></style>

    <style>
        img {
            width: 100%;
            height: auto;
        }

        .container {
            margin: 20px;
        }

        code {
            background-color: red;
            border-radius: 4px;
            padding: 2px 5px;
            color: #c7254e;
            background-color: #f9f2f4;
        }

        .markdown-html > p {
            margin: 0;
        }

        .bullet {
            margin-right: 0.5em;
            font-size: 1.6em;
            color: #555;
            border-radius: 50%;
        }

    </style>
    <template>
        <template is="dom-if" if="[[isType(data,'image')]]">
            <div class="container">
                <img class="instr_img" src="[[data.src]]"/>
            </div>
        </template>
        <template is="dom-if" if="[[isType(data,'text')]]">
            <div class="container layout horizontal">
                <span class="bullet">[[data.content.bullet]]</span>

                <marked-element markdown=[[data.content.content]]>
                    <div class="markdown-html flex"></div>
                </marked-element>
            </div>
        </template>
        <!-- <template is="dom-if" if="[[isType(data,'button')]]">
            <ajax-button active="[[active]]" data="[[data]]">[[data.caption]]
                <small>([[data.keys]])</small>
            </ajax-button>
        </template> -->
        <!-- <template is="dom-if" if="[[isType(data,'svg-button-connect')]]">
            <svg-button-connect active="[[active]]" data="[[data]]">
            </svg-button-connect>
        </template> -->
        <!-- <template is="dom-if" if="[[isType(data,'icon-button')]]">
            <div class="container">
                <icon-ajax-button active="[[active]]" data="[[data]]"></icon-ajax-button>
            </div>
        </template> -->
        <!-- <template is="dom-if" if="[[isType(data,'icon-nav-button')]]">
            <div class="container">
                <icon-nav-button active="[[active]]" data="[[data]]"></icon-nav-button>
            </div>
        </template> -->
        <!-- <template is="dom-if" if="[[isType(data,'keypad')]]">
                <key-pad active="[[active]]"></key-pad>
            </template> -->
        <template is="dom-if" if="[[isType(data,'pv-keypad')]]" restamp="true">
            <div class="container">
                <pv-keypad active="[[active]]" data="[[data]]"></pv-keypad>
            </div>
        </template>
        <!-- <template is="dom-if" if="[[isType(data,'remote')]]">
                <pv-remote active="[[active]]"></pv-remote>
            </template> -->
        <template is="dom-if" if="[[isType(data,'navbutton')]]">
            <nav-button active="[[active]]" data="[[data]]">[[data.caption]]
                <small>([[data.keys]])</small>
            </nav-button>
        </template>
    </template>
    <script>
        Polymer({
            is: 'ui-cell',
            properties: {
                data: {
                    type: Object,
                    value: {} //,
                    //observer: '_dataChanged'
                }
            },
            // _dataChanged: function(data) {     this.navbutton = false;     this.pvkeypad = false;     this.image = false;     this.txt = false;     if (data !== undefined) {         switch (data.type) {             case "navbutton":
            // this.navbutton = true;                 break;             case "pv-keypad":                 this.pvkeypad = true;                 break;             case "image":                 this.image = true;                 break;             case "text":
            //               this.txt = true;                 break;         }     }     console.log("data changed"); },
            ready: function () {
                this.checkWidth();
            },
            checkWidth: function () {
                if (this.data !== undefined) {
                    if (this.data.width !== undefined) {
                        this.setAttribute("style", "width:" + this.data.width);
                    }
                }
            },
            isType: function (instruction, _type) {
                var tr = instruction.type === _type;
                return tr;
            }

        });
    </script>
</dom-module>
